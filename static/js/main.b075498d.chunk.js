(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[1],{10:function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"e",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"b",(function(){return b}));var r=n(21),c=n(3),a={user:{name:null,email:null},token:null,isLoggedIn:!1},i=Object(c.d)({name:"auth",initialState:a,reducers:{setCredentials:function(e,t){var n=t.payload,r=n.user,c=n.token;e.user=r,e.token=c,e.isLoggedIn=!0},removeCredentials:function(){return a},setCurrentUser:function(e,t){var n=t.payload;e.user=Object(r.a)({},n),e.isLoggedIn=!0}}});t.a=i.reducer;var s=i.actions,o=s.setCredentials,u=s.removeCredentials,d=s.setCurrentUser,l=function(e){return e.auth.user.name},j=function(e){return e.auth.token},b=function(e){return e.auth.isLoggedIn}},27:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return u}));var r=n(39),c=n(11),a=Object(r.a)({reducerPath:"usersApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Users"],endpoints:function(e){return{getCurrentUser:e.query({query:function(){return"/users/current"},providesTags:["Users"]}),signupUser:e.mutation({query:function(e){return{url:"/users/signup",method:"POST",body:{name:e.name,email:e.email,password:e.password},transformResponse:function(e){return e.data}}},invalidatesTags:["Users"]}),loginUser:e.mutation({query:function(e){return{url:"/users/login",method:"POST",body:{email:e.email,password:e.password}}},invalidatesTags:["Users"]}),logoutUser:e.mutation({query:function(){return{url:"users/logout",method:"POST"}},invalidatesTags:["Users"]})}}}),i=a.useGetCurrentUserQuery,s=a.useSignupUserMutation,o=a.useLoginUserMutation,u=a.useLogoutUserMutation},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return o}));var r=n(39),c=n(11),a=Object(r.a)({reducerPath:"contactsApi",baseQuery:Object(c.d)({baseUrl:"https://connections-api.herokuapp.com/",prepareHeaders:function(e,t){var n=(0,t.getState)().auth.token;return n&&e.set("authorization","Bearer ".concat(n)),e}}),tagTypes:["Contacts"],endpoints:function(e){return{getContacts:e.query({query:function(){return"/contacts"},providesTags:["Contacts"]}),addContact:e.mutation({query:function(e){return{url:"/contacts",method:"POST",body:{name:e.name,number:e.number}}},invalidatesTags:["Contacts"]}),deleteContact:e.mutation({query:function(e){return{url:"/contacts/".concat(e),method:"DELETE"}},invalidatesTags:["Contacts"]})}}}),i=a.useGetContactsQuery,s=a.useAddContactMutation,o=a.useDeleteContactMutation},45:function(e,t,n){e.exports={link:"AuthNav_link__3L-OI"}},47:function(e,t,n){e.exports={link:"Navigation_link__1JCPG"}},57:function(e,t,n){e.exports={span:"UserMenu_span__3LTxG"}},73:function(e,t,n){},74:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(26),i=n.n(a),s=n(6),o=n(20),u=n(53),d=(n(73),n(7)),l=(n(74),n(2)),j=function(e){var t=e.children;return Object(l.jsx)("div",{children:t})},b=function(e){var t=e.children;return Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(j,{children:t})})},O=n(10),h=n(27),f=n(45),p=n.n(f);function g(){return Object(l.jsxs)("div",{children:[Object(l.jsx)(o.b,{to:"/register",className:p.a.link,children:"Registration"}),Object(l.jsx)(o.b,{to:"/login",className:p.a.link,children:"LogIn"})]})}var m=n(47),x=n.n(m),v=function(){var e=Object(s.e)(O.b);return Object(l.jsx)("nav",{children:e&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(o.b,{to:"/home",exact:!0,className:x.a.link,children:"Home"}),Object(l.jsx)(o.b,{to:"/contacts",className:x.a.link,children:"Contacts"})]})})},y=n(37),k=n(100),T=n(57),C=n.n(T);function U(){var e=Object(s.d)(),t=Object(s.e)(O.d),n=Object(h.c)(),r=Object(y.a)(n,1)[0];return Object(l.jsxs)("div",{children:[Object(l.jsxs)("span",{className:C.a.span,children:["Welcome, ",t]}),Object(l.jsx)(k.a,{variant:"contained",color:"secondary",type:"button",size:"small",onClick:function(){r(),e(Object(O.e)())},children:"Log Out"})]})}function w(){var e=Object(s.e)(O.b),t=Object(s.d)(),n=Object(s.e)(O.c),c=Object(h.a)(n).data;return Object(r.useEffect)((function(){null!==n&&t(Object(O.g)(c))}),[n,t,c]),Object(l.jsxs)("header",{children:[Object(l.jsx)(v,{}),e?Object(l.jsx)(U,{}):Object(l.jsx)(g,{})]})}var P=n(21),L=n(4),S=["children","redirectTo"];function q(e){var t=e.children,n=e.redirectTo,r=void 0===n?"/":n,c=Object(L.a)(e,S),a=Object(s.e)(O.b);return Object(l.jsx)(d.b,Object(P.a)(Object(P.a)({},c),{},{children:a?t:Object(l.jsx)(d.a,{to:r})}))}var _=["children","restricted","redirectTo"];function z(e){var t=e.children,n=e.restricted,r=void 0!==n&&n,c=e.redirectTo,a=void 0===c?"/":c,i=Object(L.a)(e,_),o=Object(s.e)(O.b)&&r;return Object(l.jsx)(d.b,Object(P.a)(Object(P.a)({},i),{},{children:o?Object(l.jsx)(d.a,{to:a}):t}))}var N=n(104),I=n(105),M=Object(r.lazy)((function(){return n.e(8).then(n.bind(null,157))})),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,167))})),E=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,166))})),G=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(7)]).then(n.bind(null,164))})),H=Object(N.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function Q(){var e=H();return Object(l.jsxs)(b,{children:[Object(l.jsx)(w,{}),Object(l.jsx)(r.Suspense,{fallback:Object(l.jsx)("div",{className:e.root,children:Object(l.jsx)(I.a,{color:"secondary"})}),children:Object(l.jsxs)(d.d,{children:[Object(l.jsx)(z,{path:"/",exact:!0,children:Object(l.jsx)("h1",{children:"Hello, start to work"})}),Object(l.jsx)(z,{path:"/register",redirectTo:"/login",restricted:!0,children:Object(l.jsx)(A,{})}),Object(l.jsx)(z,{path:"/login",redirectTo:"/contacts",restricted:!0,children:Object(l.jsx)(E,{})}),Object(l.jsx)(q,{path:"/home",children:Object(l.jsx)(M,{})}),Object(l.jsx)(q,{path:"/contacts",redirectTo:"/login",children:Object(l.jsx)(G,{})})]})})]})}var B,J=n(28),D=n(19),F=n(3),R=n(24),W=n(59),K=n.n(W),V=n(38),X={key:"auth",storage:K.a,whitelist:["token"]},Y=Object(F.a)({reducer:(B={},Object(D.a)(B,V.a.reducerPath,V.a.reducer),Object(D.a)(B,h.e.reducerPath,h.e.reducer),Object(D.a)(B,"auth",Object(R.g)(X,O.a)),B),middleware:function(e){return[].concat(Object(J.a)(e({serializableCheck:{ignoredActions:[R.a,R.f,R.b,R.c,R.d,R.e]}})),[V.a.middleware,h.e.middleware])},devTools:!1}),Z=Object(R.h)(Y);n(82);i.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(s.a,{store:Y,children:Object(l.jsx)(o.a,{children:Object(l.jsx)(u.a,{loading:null,persistor:Z,children:Object(l.jsx)(Q,{})})})})}),document.getElementById("root"))}},[[83,2,3]]]);
//# sourceMappingURL=main.b075498d.chunk.js.map